<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS原型 | PENG BlOG</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="
js有六种数据类型Number、String、Boolean、Undefined、Null（ECMAScript 2015新增了一种基本数据类型：symbol）
我们可以用typeof检测数据类型
`js
typeof 123  // Number
typeof &#39;abc&#39; // String
typeof true  // Boolean
typeof undefin ...">
    
    <link rel="preload" href="/assets/css/0.styles.b79562cf.css" as="style"><link rel="preload" href="/assets/js/app.9932d041.js" as="script"><link rel="preload" href="/assets/js/7.f5f53833.js" as="script"><link rel="preload" href="/assets/js/1.b31eae2a.js" as="script"><link rel="preload" href="/assets/js/17.7792ac8f.js" as="script"><link rel="prefetch" href="/assets/js/10.db774d39.js"><link rel="prefetch" href="/assets/js/11.d1188a4d.js"><link rel="prefetch" href="/assets/js/12.94def00a.js"><link rel="prefetch" href="/assets/js/13.16f2d126.js"><link rel="prefetch" href="/assets/js/14.9f5d9ef3.js"><link rel="prefetch" href="/assets/js/15.8299e824.js"><link rel="prefetch" href="/assets/js/16.a64bf65d.js"><link rel="prefetch" href="/assets/js/18.dbb09ae5.js"><link rel="prefetch" href="/assets/js/19.cae2a26d.js"><link rel="prefetch" href="/assets/js/20.e02ccde6.js"><link rel="prefetch" href="/assets/js/21.35f00429.js"><link rel="prefetch" href="/assets/js/22.dd6c4c6d.js"><link rel="prefetch" href="/assets/js/23.bf727a4f.js"><link rel="prefetch" href="/assets/js/4.07edc6d3.js"><link rel="prefetch" href="/assets/js/5.0cd42b75.js"><link rel="prefetch" href="/assets/js/6.4dcb66aa.js"><link rel="prefetch" href="/assets/js/8.c7c42311.js"><link rel="prefetch" href="/assets/js/9.f34a57b3.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.d31cc0c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b79562cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">PENG BlOG </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">About</a></li><li class="nav-item"><a href="/blog/" class="nav-link">博客</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="nav-item"><a href="https://github.com/myronyang" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">PENG BlOG </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">About</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link">博客</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="https://github.com/myronyang" target="_blank" rel="noopener noreferrer" class="nav-link external">Github</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        JS原型
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-9-5">
      Wed Sep 05 2018
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-532d3a9c><a href="/tag/Javascript" data-v-532d3a9c><span data-v-532d3a9c>Javascript</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <p>js有六种数据类型<code>Number、String、Boolean、Undefined、Null</code>（ECMAScript 2015新增了一种基本数据类型：<code>symbol</code>）
我们可以用typeof检测数据类型</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token number">123</span>  <span class="token comment">// Number</span>
<span class="token keyword">typeof</span> <span class="token string">'abc'</span> <span class="token comment">// String</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span>  <span class="token comment">// Boolean</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span>  <span class="token comment">// Undefined</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span>  <span class="token comment">// Object</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>  <span class="token comment">// Object</span>
<span class="token keyword">typeof</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>  <span class="token comment">// Object</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment">// Object</span>
<span class="token keyword">typeof</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// Function</span>
</code></pre></div><p><code>undefined, number, string, boolean</code>属于值类型，可以用typeof检测。但是函数、对象、数组、null、new Number()都是对象，它们引用类型。</p> <h4 id="判断引用类型我们可以使用instanceof"><a href="#判断引用类型我们可以使用instanceof" class="header-anchor">#</a> 判断引用类型我们可以使用<code>instanceof</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fn <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre></div><blockquote><p><strong>一切（引用类型）都是对象，对象是属性的集合</strong></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token operator">...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>在js中数组、函数、数组都是对象。<font color="#b29400"><strong>对象里面一切都是属性(包含方法)</strong></font>。方法也是一种属性，因为它的属性表示为键值对的形式。
并且js对象可以任意扩展属性。</p> <p>那么可以给函数，数组添加属性吗？当然不行，但是它可以以另一种方式添加属性。只要是对象，就是属性和方法的合集。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">123</span>
fn<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
fn<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面我们对函数fn添加了a、b、c三个属性，此时的fn就是属性的集合。</p> <h2 id="函数和对象"><a href="#函数和对象" class="header-anchor">#</a> 函数和对象</h2> <p>函数和数组是一种对象，数组我们可以说是对象的一种，数组就像对象的一种子集一样。但函数和对象不仅仅是一种包含和被包含的关系，有一种相互共生的意思。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'tom'</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token string">'1993'</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>通过上面我们发现<font color="#b29400"><strong>对象可以通过函数来创建</strong></font>,但是我们平时创建对象是这样的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	<span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
</code></pre></div><p>这其实是js语法糖，js为了我们方便我们，简化代码的一种‘快捷方式’。
以上代码本质是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span>
obj<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">3</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><p>而其中的 Object 和 Array 都是函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> Object <span class="token comment">// function</span>
<span class="token keyword">typeof</span> Array <span class="token comment">// function</span>
</code></pre></div><p>所以我们可以确定的说<font color="#b29400"><strong>对象都是通过函数来创建的</strong></font></p> <p>这就是扯淡的地方，对象都是通过函数来创建的，而函数又是一种对象。
要搞清楚这个我们就必须去理解prototype原型了。</p> <h2 id="prototype原型"><a href="#prototype原型" class="header-anchor">#</a> prototype原型</h2> <p>在js中默认给每个函数一个属性prototype。这个prototype的属性值是一个对象，而且js给这个对象给了个constructor的属性,<font color="#b29400"><strong>指向这个函数本身</strong></font></p> <p><img src="http://gxzn-free.oss-cn-zhangjiakou.aliyuncs.com/Web-private-resource/Blog/prototypes/img1.png" alt="prototype"></p> <p>在Object原型中除了constructor还有很多其他属性，当然我们也可以自己添加属性。
以jQuery为例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> $div <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
$div<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span>
</code></pre></div><p>以上代码$div返回的一个对象，对象是通过函数创建的。</p> <div class="language-js extra-class"><pre class="language-js"><code>jQuery<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">attr</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">jQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>用自己的代码演示就是</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'jack'</span>
<span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getYear</span><span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token number">1993</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Fn是个函数，fn是Fn函数new出来，是Fn的引用。这样fn就可以调用Fn.prototype中的属性。</p> <p>而且每个对象都有一个隐藏的属性<code>__proto__</code>，这个属性引用了创建这个对象的函数的prototype。</p> <p>即：<code>fn.__proto__ === Fn.prototype</code></p> <h2 id="隐式原型"><a href="#隐式原型" class="header-anchor">#</a> 隐式原型</h2> <h4 id="每个函数function都有一个prototype-即原型。同时每个对象都有一个-proto-可成为隐式原型。"><a href="#每个函数function都有一个prototype-即原型。同时每个对象都有一个-proto-可成为隐式原型。" class="header-anchor">#</a> <font color="#b29400">每个函数function都有一个prototype</font>，即原型。同时<font color="#b29400">每个对象都有一个__proto__</font>,可成为隐式原型。</h4> <p><img src="http://gxzn-free.oss-cn-zhangjiakou.aliyuncs.com/Web-private-resource/Blog/prototypes/img3.png" alt="prototype"></p> <p>从上图来看<code>obj.__proto__ === obj.prototype</code></p> <p>即，<font color="#b29400"><strong>每个对象都有一个__proto__属性，指向创建该对象的函数的prototype</strong></font></p> <p>上图中的<code>object.prototype</code>也是个对象，那么他的<code>__proto__</code>指向哪里？</p> <p>我们自己定义函数的prototype的本质和<code>var obj = {}</code>是一样的，都是被Object创建，所以他的<code>__proto__</code>指向<code>Object.prototype</code>。</p> <blockquote><p><strong>但是<code>Object.prototype</code>是一个特例，它的·<code>__proto__</code>指向<code>null</code></strong></p></blockquote> <p>函数也是对象，函数也有<code>__proto__</code>吗？</p> <p>当然有，函数是通过<code>Function</code>创建的，这是个大写的F。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'return x + y'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>第一种是我们常用方式，第二种是通过<code>new Function</code>来创建。</p> <blockquote><p><strong>首先根本不推荐使用Function来创建函数(此处只是演示)</strong></p></blockquote> <p><img src="http://gxzn-free.oss-cn-zhangjiakou.aliyuncs.com/Web-private-resource/Blog/prototypes/img6.png" alt="prototype"></p> <p>上图中的<code>Foo.__proto__</code>根据__proto__属性，指向创建该对象的函数的prototype，所以指向<code>Function.prototype</code>，<code>Object.__proto__</code>指向<code>Function.prototype</code>，还有一个<code>Function.__proto__</code>指向<code>Function.prototype</code>这是个是一个环形结构。</p> <p>Function是一个函数，函数是一种对象，也有__proto__属性。既然是函数它一定是被Function创建。所以Function是被自身创建，所以它的__proto__指向自身的prototype。</p> <p>还有一个问题，<code>Function.prototype</code>指向的对象，它的__proto__是不是也指向<code>Object.prototype</code>？
答案是肯定的，因为<code>Function.prototype</code>指向的对象也是被一个普通的被Object创建的对象，所以也遵循基本的规则。</p> <h2 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h2> <p>instanceof用于我们typeof返回object/function时，我们不知道它是对象还是数组或者new Number时。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

fn <span class="token keyword">instanceof</span> <span class="token class-name">Fn</span>  <span class="token comment">// true</span>
fn <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>  <span class="token comment">// true</span>
fn <span class="token keyword">instanceof</span> <span class="token class-name">Function</span>  <span class="token comment">// true</span>
</code></pre></div><p>要弄懂fn由Fn创建，为什么fn instanceof Object为true了，先看下图</p> <p><img src="http://gxzn-free.oss-cn-zhangjiakou.aliyuncs.com/Web-private-resource/Blog/prototypes/img7.png" alt="prototype"></p> <h4 id="重点看上图-看似繁杂-但是我们必须一步步分析-首先温故两个概念"><a href="#重点看上图-看似繁杂-但是我们必须一步步分析-首先温故两个概念" class="header-anchor">#</a> 重点看上图，看似繁杂，但是我们必须一步步分析，首先温故两个概念</h4> <blockquote><p><strong>每个对象都有一个__proto__属性，指向创建该对象的函数的prototype。</strong> <br> <strong>每个函数都有一个属性叫做prototype。</strong> <br> <strong>且默认的只有一个叫做constructor的属性，指向这个函数本身。</strong></p></blockquote> <ul><li>f1由Foo创建，所以f1的__proto__指向Foo.prototype，而Foo是由function Foo创建，Foo也是一个函数，函数的prototype和onstructor指向函数本身，
所以function Foo和Foo.prototype相互关联。</li> <li>Foo.prototype的原型是个对象，他的__proto__往上找就是Object.prototype，而Object是由function Object创建，所以function Object的__proto__指向Function.prototype</li> <li>Function.prototype是个对象所以它的__proto__指向Object.prototype</li></ul> <h4 id="instanceof是如何判断的"><a href="#instanceof是如何判断的" class="header-anchor">#</a> instanceof是如何判断的</h4> <p>首先Instanceof运算符的第一个变量是一个对象，暂时称为A；第二个变量一般是一个函数，暂时称为B。</p> <p>Instanceof的判断队则是：沿着A的__proto__这条线来找，同时沿着B的prototype这条线来找，如果两条线能找到同一个引用，即同一个对象，那么就返回true。如果找到终点还未重合，则返回false。</p> <h4 id="自己实现一个instanceof-就是检测a的原型链-proto-上是否有b-prototype-若有返回true-否则false。"><a href="#自己实现一个instanceof-就是检测a的原型链-proto-上是否有b-prototype-若有返回true-否则false。" class="header-anchor">#</a> 自己实现一个instanceof，就是检测A的原型链（<strong>proto</strong>）上是否有B.prototype，若有返回true，否则false。</h4> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">instance_of</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// A表示左表达式，B表示右表达式 </span>
    <span class="token keyword">var</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>   <span class="token comment">// 取 R 的显示原型 </span>
    <span class="token constant">A</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>  <span class="token comment">// 取 L 的隐式原型</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span>      
             <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">O</span> <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">)</span>  <span class="token comment">// 当 O 显式原型 严格等于  A隐式原型 时，返回true</span>
             <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   
        <span class="token constant">A</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Instanceof这样弄的意思其实想表达一种继承关系，或者原型链的结构。</p> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <p>javascript中如何通过原型链来实现继承的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

f1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">200</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token comment">// 200</span>
</code></pre></div><p>以上代码中，f1是由Foo函数new出来的对象，f1.a是f1对象的基本属性，f1.b是从Foo.prototype得来，因为<code>f1.__proto__</code>指向的是<code>Foo.prototype</code>。</p> <blockquote><p><strong>访问一个对象的属性时，先在基本属性中查找，如果没有，再沿着__proto__这条链向上找，这就是原型链。</strong></p></blockquote> <p><img src="http://gxzn-free.oss-cn-zhangjiakou.aliyuncs.com/Web-private-resource/Blog/prototypes/182013450814552.png" alt="prototype"></p> <p>上图中，访问f1.b时，f1的基本属性中没有b，于是沿着__proto__找到了Foo.prototype.b。</p> <p>在实际应用中我们可以通过<code>hasOwnProperty</code>来区分一个属性到底是基本的还是从原型中找到。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

f1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">200</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">in</span> f1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// a b</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">in</span> f1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// a</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>首先我们发现f1根本没有hasOwnProperty这个属性方法，而且Foo.prototype中也没有，而Object.prototype中是有asOwnProperty。</p></li> <li><p>对象的原型链是沿着__proto__这条线走的，因此在查找f1.hasOwnProperty属性时，就会顺着原型链一直查找到Object.prototype。</p></li> <li><p>所以所有的对象都会找到Object.prototype，因此所有的对象都会有Object.prototype的方法。这就是所谓的“继承”。</p></li> <li><p>我们都知道每个函数都有call，apply方法，都有length，arguments，caller等属性。函数由Function函数创建，因此继承的Function.prototype中的方法,因此每个函数都可以用这些方法。</p></li> <li><p>而且函数也有hasOwnProperty，上节说到重复下Function.prototype的__proto__指向Object.prototype，那所以Function.prototype继承了来自Object.prototype的方法。</p></li></ul> <h2 id="灵活性"><a href="#灵活性" class="header-anchor">#</a> 灵活性</h2> <p>在Java和C#中，class如同一个模具，对象就是根据这个模具来创建的，创建完成是不能随便改动的。</p> <p>而在js中，没有模具，你可以随意改变。</p> <h4 id="js的对象属性是可以随时改动的。"><a href="#js的对象属性是可以随时改动的。" class="header-anchor">#</a> js的对象属性是可以随时改动的。</h4> <p>对象或者函数被new出来后，可能没有任何属性。但是后面你可以不断添加属性，非常灵活。</p> <p>例如在jQuery源码中，对象被创建时什么属性都没有，都是代码一步一步执行时，一个一个加上的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">jQuery</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> jQuery<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> context<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

jQuery<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">expando</span><span class="token operator">:</span> <span class="token string">&quot;jQuery&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>version <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">relplace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\D</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">noop</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="如果继承的方法不合适-可以做出修改。"><a href="#如果继承的方法不合适-可以做出修改。" class="header-anchor">#</a> 如果继承的方法不合适，可以做出修改。</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
	<span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Object]</span>

<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1, 2, 3</span>
</code></pre></div><p>arr本身属性是没有toString的，它的toString来自__proto__指向的Object.prototype。但是我们发现两次toString结果不一样。肯定是肯定是Array.prototype.toString()方法做了修改。</p> <p>同理，我也可以自定义一个函数，并自己去修改prototype.toString()方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">'toString已修改'</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// toString已修改</span>
</code></pre></div><h4 id="如果觉得缺少你要用的方法-也可以自己创建。"><a href="#如果觉得缺少你要用的方法-也可以自己创建。" class="header-anchor">#</a> 如果觉得缺少你要用的方法，也可以自己创建。</h4> <p>如在Date对象中添加格式化方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fmt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>   
    <span class="token string-property property">&quot;M+&quot;</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>                 <span class="token comment">//月份   </span>
    <span class="token string-property property">&quot;d+&quot;</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token comment">//日   </span>
    <span class="token string-property property">&quot;h+&quot;</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                   <span class="token comment">//小时   </span>
    <span class="token string-property property">&quot;m+&quot;</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">//分   </span>
    <span class="token string-property property">&quot;s+&quot;</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 <span class="token comment">//秒   </span>
    <span class="token string-property property">&quot;q+&quot;</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//季度   </span>
    <span class="token string-property property">&quot;S&quot;</span>  <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token comment">//毫秒   </span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>   
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(y+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span>   
    fmt<span class="token operator">=</span>fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> o<span class="token punctuation">)</span>   
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token operator">+</span> k <span class="token operator">+</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span>   
  fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> <span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;00&quot;</span><span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
  <span class="token keyword">return</span> fmt<span class="token punctuation">;</span>   
<span class="token punctuation">}</span>  
</code></pre></div><h2 id="es6中class"><a href="#es6中class" class="header-anchor">#</a> es6中class</h2> <p>综上所述的我们要创建一个类（对象），我们可以通过函数创建，再prototype上添加属性方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// tom</span>
</code></pre></div><p>ES6引入了Class（类）这个概念，通过class关键字可以定义类。该关键字的出现使得其在对象写法上更加清晰，更接近java/c#那些后台语言。</p> <p>用ES6重写上面代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token punctuation">}</span>

	<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// tom</span>
</code></pre></div><p>对于es6中的class，其实就是第二章提到语法糖。它的绝大部分功能，ES5都可以看到，新的class写法只是让对象原型的写法更加清晰，更像面向对象编程语法而已。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Person<span class="token punctuation">)</span> <span class="token comment">//function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre></div><p>从上面代码Person其实还是由函数创建，它也有自己的prototype, prototype下的属性constructor指向其本身。</p> <p>我们可以通过prototype重写getName方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token punctuation">}</span>

	<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token string">'prototype '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// prototype tom</span>
</code></pre></div><p>实际上类的所有方法都定义在类的prototype属性上。</p> <p>当然我们也可以使用person的__proto__来添加属性。但是使用__proto__属性会改写原型，会改变Class的原始定义，影响到所有实例，所以不推荐使用！</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#数据类型" title="数据类型">数据类型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#函数和对象" title="函数和对象">函数和对象</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#prototype原型" title="prototype原型">prototype原型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#隐式原型" title="隐式原型">隐式原型</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#instanceof" title="instanceof">instanceof</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#继承" title="继承">继承</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#灵活性" title="灵活性">灵活性</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#es6中class" title="es6中class">es6中class</a></div></div></div></div> <footer class="footer" data-v-8eb634d6><div class="footer-left-wrap" data-v-8eb634d6><ul class="contact" data-v-8eb634d6><li class="contact-item" data-v-8eb634d6><a href="https://github.com/myronyang" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-8eb634d6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-8eb634d6><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-8eb634d6></path></svg>
          
        </a></li><li class="contact-item" data-v-8eb634d6><a href="/2018/09/05/javascript-prototype/821253835@qq.com.html" class="nav-link" data-v-8eb634d6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-8eb634d6><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-8eb634d6></path><polyline points="22,6 12,13 2,6" data-v-8eb634d6></polyline></svg>
          
        </a></li><li class="contact-item" data-v-8eb634d6><a href="https://tjui.netlify.app/#/" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-8eb634d6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe" data-v-8eb634d6><circle cx="12" cy="12" r="10" data-v-8eb634d6></circle><line x1="2" y1="12" x2="22" y2="12" data-v-8eb634d6></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" data-v-8eb634d6></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-8eb634d6><ul class="copyright" data-v-8eb634d6><li class="copyright-item" data-v-8eb634d6>Myron Yang © 2020-2021</li></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9932d041.js" defer></script><script src="/assets/js/7.f5f53833.js" defer></script><script src="/assets/js/1.b31eae2a.js" defer></script><script src="/assets/js/17.7792ac8f.js" defer></script>
  </body>
</html>
